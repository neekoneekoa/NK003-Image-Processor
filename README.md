# 图片裁剪与边框添加工具 - Image Processor

## 📖 项目版本
- **v0.0.1**：基础功能开发完成
- **v0.1.0**：批量处理功能实现，界面优化完成

## 📖 项目简介
妮蔻蹦跶着把尾巴卷成话筒，清了清嗓子，鳞片闪出彩虹色）
师傅师傅！听好啦——
这可是“妮蔻的魔法照片变变机”！✨
只要把你的小照片“嗖”地丢进来，妮蔻就能——
1. 
帮你“咔嚓”剪出最可爱的 4:3 或 3:4 小框框，横的竖的随你挑！
2. 
再给它裹上一层 60 像素软绵绵白云边，像把照片装进棉花糖！ʕ•ᴥ•ʔ
3. 
一口气还能变好多张！把照片排排队，妮蔻“哒哒哒”地自动修完一张就跳去下一张，师傅只管喝着奶茶等收图～
4. 
不想修惹？点“跳过”，妮蔻就“咻”地把当前照片吹走，换下一枚！
5. 
拖拖拽拽最开心！把文件夹里的小图片全部抓进来，妮蔻的尾巴会亮灯灯，告诉你“收到啦！”
（妮蔻把耳朵变成小喇叭，滴滴——）
而且哦～每导一张图，妮蔻都会乖乖给它戴上“NEEKO_1、NEEKO_2……”的小胸牌，永远不重名，师傅再也不用绞尽脑汁想文件名！
（原地转圈，鳞片变成爱心形状）
总结一句话：
“有了妮蔻，批量裁剪加白边——就是玩！”

### 核心功能

#### 图片加载与显示
- 支持单张和多张图片加载
- 支持拖放操作，方便快速添加图片
- 自适应画布大小，支持滚动查看大图
- 中文界面支持，操作直观友好

#### 图片裁剪功能
- 支持4:3和3:4比例切换
- 可视化裁剪框，可拖拽移动位置
- 八向手柄调整裁剪框大小，保持比例不变
- 自动约束裁剪框不超出图片范围
- 实时预览裁剪效果

#### 边框添加功能
- 自动为裁剪后的图片添加60像素白边
- 支持PNG和JPEG格式导出
- 自动生成NEEKO_1, NEEKO_2格式的文件名
- 自定义保存路径选项

#### 批量处理功能
- 图片队列管理，支持多图片排队处理
- 当前编辑图片高亮显示在队列顶部
- 导出后自动处理下一张图片
- 支持跳过当前图片，继续处理下一张
- 可选择队列中的任意图片进行编辑

## ✨ 功能特点
- 直观的图形用户界面，操作简单易用
- 支持多种图片格式（PNG、JPG、JPEG、BMP、GIF）
- 批量处理功能，大幅提高工作效率
- 响应式设计，窗口大小可自由调整
- 自动生成有规律的文件名，便于管理
- 实时显示处理进度和队列状态

## 🔧 系统要求
- **操作系统**：Windows、macOS、Linux
- **Python版本**：3.7或更高版本
- **依赖库**：
  - tkinter (Python标准库)
  - Pillow (PIL)
  - tkinterdnd2 (拖放支持)

## 🛠️ 安装方法

### 1. 安装Python
请确保您的系统已安装Python 3.7或更高版本。您可以从[Python官网](https://www.python.org/downloads/)下载并安装。

### 2. 安装依赖库
打开命令行工具，执行以下命令安装所需的依赖库：

```bash
pip install pillow tkinterdnd2
```

### 3. 下载程序
将`image_processor.py`文件下载到您的本地目录。

### 4. 运行程序
在命令行中导航到程序所在目录，执行以下命令运行程序：

```bash
python image_processor.py
```

## 🚀 使用方法

### 1. 加载图片
您可以通过两种方式加载图片：
- 点击"加载图片"按钮，在文件对话框中选择一张或多张图片
- 直接将图片文件拖放到程序窗口中的图片显示区域

### 2. 调整裁剪区域
- **移动裁剪框**：点击裁剪框内部并拖拽，可移动裁剪区域
- **调整大小**：拖动裁剪框周围的蓝色手柄，可调整裁剪区域大小
- **切换比例**：点击工具栏中的"4:3"或"3:4"单选按钮，可切换裁剪比例

### 3. 导出图片
- 点击"导出图片"按钮
- 选择保存位置（程序会自动生成NEEKO_1, NEEKO_2格式的文件名）
- 点击"保存"完成导出，程序会自动为图片添加60像素白边

### 4. 批量处理
- 加载多张图片后，图片会显示在右侧的"待处理图片队列"中
- 当前正在处理的图片会显示在队列顶部，标记为"● 当前："
- 导出完成后，程序会自动加载队列中的下一张图片
- 点击"跳过图片"按钮，可跳过当前图片，直接处理下一张
- 点击队列中的任意图片，可直接切换到该图片进行编辑

## 📂 项目结构
```
图片裁剪与边框添加工具/
├── image_processor.py    # 主程序文件
├── ZZZZZZ.ico           # 程序图标文件
├── README.md            # 项目说明文档
└── desktop.ini          # 文件夹配置文件
```

## � 代码实现说明

### 核心类与方法

#### ImageProcessor类
主程序的核心类，负责整个应用的初始化和功能实现。

```python
class ImageProcessor:
    def __init__(self, root):
        # 初始化窗口和变量
        self.root = root
        self.root.title("图片裁剪与边框添加工具")
        self.root.geometry("1500x900")
        self.root.minsize(800, 600)
        # ...
```

#### 图片处理相关方法
- `load_image()`：加载多张图片到队列
- `on_drop()`：处理拖放事件，添加图片到队列
- `process_image(file_path)`：处理单张图片，显示在画布上
- `display_image()`：在画布上显示图片，自适应大小
- `create_initial_rect()`：创建初始裁剪框
- `export_image()`：导出处理后的图片，自动添加边框

#### 交互控制相关方法
- `on_button_press()`, `on_mouse_drag()`, `on_button_release()`：处理鼠标事件
- `add_resize_handles()`：添加裁剪框调整手柄
- `resize_rect()`：调整裁剪框大小，保持比例
- `change_ratio()`：切换裁剪比例（4:3/3:4）

#### 批量处理相关方法
- `update_queue_display()`：更新图片队列显示
- `on_queue_select()`：处理队列中图片的选择
- `skip_image()`：跳过当前图片，处理下一张

## �️ 技术实现

### 1. 图形界面框架
- 使用Python的Tkinter库创建图形界面
- 集成tkinterdnd2实现拖放功能
- 采用面向对象的编程方式，代码结构清晰

### 2. 图片处理引擎
- 使用Pillow (PIL)库进行图片加载、裁剪和保存
- 实现了高效的图片缩放算法，保证显示质量
- 支持多种图片格式，兼容性强

### 3. 用户交互设计
- 直观的拖拽操作，符合用户习惯
- 实时反馈裁剪效果，所见即所得
- 响应式界面设计，适应不同屏幕尺寸

### 4. 批量处理机制
- 队列管理系统，支持多图片排队
- 自动处理流程，减少重复操作
- 灵活的图片选择功能，提高工作效率

## 🔮 未来发展计划
- 增加更多裁剪比例选项（1:1、16:9等）
- 支持自定义边框大小和颜色
- 添加图片滤镜和调整功能（亮度、对比度等）
- 实现图片批量重命名和分类功能
- 优化大图片处理性能
- 添加撤销/重做功能

## 📋 使用技巧

### 提高工作效率的小技巧
1. **批量加载**：使用多选功能或拖放操作一次加载多张图片
2. **快速切换**：直接点击队列中的图片可快速切换编辑对象
3. **自动命名**：利用程序的自动命名功能，无需手动输入文件名
4. **队列管理**：合理安排处理顺序，先处理重要图片
5. **窗口调整**：根据屏幕大小调整窗口尺寸，获得最佳工作视图

### 常见问题解决
- **图片无法加载**：检查图片格式是否支持，尝试重新保存图片
- **拖放功能无效**：确保已正确安装tkinterdnd2库，或使用加载按钮代替
- **裁剪框异常**：尝试重新加载图片，或重启程序
- **导出失败**：检查保存路径是否存在写入权限，确保磁盘空间充足

## 🔒 许可证信息
本项目采用MIT许可证开源，您可以自由使用、修改和分发本软件。

## 📞 联系方式
如有问题或建议，欢迎联系项目开发者。

---

© 2024 图片裁剪与边框添加工具 | 基于Python的图形化图片处理应用
